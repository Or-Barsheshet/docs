---
title: "Quick dataset analysis _ old"
excerpt: "fastdup is a powerful free tool designed to rapidly extract valuable insights from your image & video datasets. It can assist you in reaching a high quality dataset by finding and removing anomalies and outliers from your datasets. Finding duplicate and near duplicate images/videos & clusters of similarity at a large scale!\n\nfastdup can also help you in reducing your data operations costs by facilitating the intelligent sampling of high-quality or novel datasets prior to labeling, as well as support the quality assessment of labeled data.\n\nfastdup graph engine is written in C++ and is highly efficient and works in an incredible scale! Running locally on a CPU only machine."
hidden: true
metadata: 
  image: []
  robots: "index"
createdAt: "Wed Feb 22 2023 14:17:57 GMT+0000 (Coordinated Universal Time)"
updatedAt: "Thu Oct 26 2023 05:37:19 GMT+0000 (Coordinated Universal Time)"
---
This is a basic getting started tutorial that glances over the main features fastdup has to offer for analyzing a visual dataset - Finding similarities, duplicates and outliers and visualizing them easily. 

For veteran fastdup users, we include a short comparison of the existing and new APIs at the end.

In this tutorial we'll use the [Oxford-IIIT Pet Dataset](https://www.robots.ox.ac.uk/~vgg/data/pets/) that contains  7,300 images of cats and dogs from 37 breeds. We will look into clusters of highly similar images, explore duplicate pairs and finally go over a few possible outliers. Let's go!

# Download a sample dataset

First, let's download and unzip the images using this bash line:

```shell
mkdir ~/data/oxford/
wget https://thor.robots.ox.ac.uk/~vgg/data/pets/images.tar.gz -O ~/data/oxford/images.tar.gz
tar xvf ~/data/oxford/images.tar.gz -C ~/data/oxford/
```

# Install fastdup

Let's start by installing fastdup from pip:

```shell bash
pip install fastdup
```

For a detailed list of installation options and supported platforms, see our [Installation guide.](https://visual-layer.readme.io/docs/installation)

# Run a basic analysis

```python
import fastdup
from fastdup.engine import Fastdup

images_dir = '~/data/oxford/images/'
work_dir = '~/workdir/oxford/images_unlabeled'

fd = Fastdup(work_dir=work_dir, input_dir=images_dir)
fd.run()
```

# Visualize components - image clusters

We will visualize the similarity clusters in the data, to find images that are similar to one another, and even exact duplicates.

```python
fd.vis.component_gallery()
```

Our component gallery quickly reveals several clusters of similar images. Top cluster shows 4 images of the same dog, that are two pairs of duplicates.

The second image shows a cluster of three, exactly identical, cat images.

The third image shows a group of Samoyed dogs in similar poses, but has no exact duplicates.

![](https://files.readme.io/96d8bf9-Screen_Shot_2023-02-22_at_15.37.02.png)

![](https://files.readme.io/4634c44-Screen_Shot_2023-02-21_at_17.03.56.png)

![](https://files.readme.io/2cf1f0b-Screen_Shot_2023-02-22_at_15.10.49.png)

![](https://files.readme.io/8b47ae1-Screen_Shot_2023-02-21_at_17.18.56.png)

![](https://files.readme.io/3361917-Screen_Shot_2023-02-22_at_15.37.47.png)

To append file names to each image, simply use the `label_col` parameter:

```python
fd.vis.component_gallery(label_col='img_filename')
```

![](https://files.readme.io/218256d-Screen_Shot_2023-02-21_at_17.04.13.png)

It seems that many of the cat images in the data are either exact duplicates of one another, or very slight variations of the same image. We can see two images that are probably resized copies of one another, like these two Abyssinian cat images.

# Visualize Duplicates

Here we see the images pairs with the highest similarity values, some having exact duplicate similarity values (1.0). This gallery is a descendant of the similarity cluster galleries, used for observing the differences and visualizing relations between images instead of whole groups. 

Left and middle images are the original dataset images, and the right image is the blended version used for highlighting differences if there are any

```python
fd.vis.duplicates_gallery()
```

![](https://files.readme.io/4dde9c3-Screen_Shot_2023-02-21_at_17.36.36.png)

![](https://files.readme.io/9511d21-Screen_Shot_2023-02-21_at_17.36.26.png)

# Visualize Outliers

Outliers are images that are the least similar to other images in the dataset. While outliers are usually case-dependent, this view can often uncover images that shouldn't belong to the data, or that are even corrupted or broken. Here we can see an image of two cats, as well as a cat in uncommon lighting conditions. Large watermarks could also register as outliers.

```python
fd.vis.outliers_gallery()
```

![](https://files.readme.io/22e9013-Screen_Shot_2023-02-21_at_17.20.35.png)

# Comparison to the older API

The new Fastdup V1.0 API follows much of the existing interface but tries to simplify the usage and avoid the need to provide paths and parameters repeatedly.

The existing V0.2xx API is still fully supported and no breaking changes were made.

### V0.2xx

```python
import fastdup

fastdup.run(input_dir="/path/to/your/folder", work_dir='out', nearest_neighbors_k=5, turi_param='ccthreshold=0.96')    #main running function.

fastdup.create_duplicates_gallery('out/similarity.csv', save_path='.')     #create a visual gallery of found duplicates
fastdup.create_outliers_gallery('out/outliers.csv',   save_path='.')       #create a visual gallery of anomalies
fastdup.create_components_gallery('out', save_path='.')                    #create visualiaiton of connected components
fastdup.create_stats_gallery('out', save_path='.', metric='blur')          #create visualization of images stastics (for example blur)
```

### V1.0

For the V1.0 API, input and work directories are set once at initialization. Parameters for the `fastdup.run` function are used in the `.run()` methods, following the same naming.

Galleries and visualization are under the `.vis` subclass.

```python python
from fastdup.engine import Fastdup

fd = Fastdup(work_dir=work_dir, input_dir=images_dir)
fd.run(nearest_neighbors_k=5, ccthreshold=0.96)

fd.vis.duplicates_gallery()     #create a visual gallery of found duplicates
fd.vis.outliers_gallery()       #create a visual gallery of anomalies
fd.vis.components_gallery()     #create visualiaiton of connected components
# Not implemented yet
fd.vis.stats_gallery()          #create visualization of images stastics (for example blur)
```
